(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(20)},18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),o=n.n(c),l=n(10),i=n.n(l),s=n(8),u=n(3),m=n(4),f=n.n(m),p=n(6),g=n(1),b=n(2),d=(n(18),function(){var e=Object(p.a)(f.a.mark(function e(t){var n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),h=function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("".concat("https://mate-academy.github.io/phone-catalogue-static/api","/phones.json"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),v=function(e,t){return t?"":"".concat(e," is required")},E=function(e){return function(t,n){return!n||n.length>=e?"":"".concat(t," should have at least ").concat(e," characters")}};!function(e){e.Name="name",e.Age="age",e.Snippet="snippet"}(a||(a={})),function(e){e.String="string",e.Number="number"}(r||(r={}));var j,O,N=function(e){var t=e.columnConfig,n=e.isSelectedAll,a=e.sortField,r=e.sortReverse,c=e.onSelectionChanged,l=e.onSort;return o.a.createElement("thead",null,o.a.createElement("tr",null,c&&o.a.createElement("th",{className:"table-headers table-headers-checkbox"},o.a.createElement("input",{type:"checkbox",checked:n,onChange:function(){return c(null)}})),Object.entries(t).map(function(e){var t=Object(g.a)(e,2),n=t[0],c=t[1];return o.a.createElement("th",{className:"table-headers table-headers-".concat(n),key:c.title,onClick:function(){return l(n,c)}},c.title,!r&&a===n&&o.a.createElement("span",{className:"icon"},o.a.createElement("span",{className:"fas fa-angle-down","aria-hidden":"true"})),r&&a===n&&o.a.createElement("span",{className:"icon"},o.a.createElement("span",{className:"fas fa-angle-up","aria-hidden":"true"})))})))},P=function(e){var t=e.allPhones,n=e.phone,a=e.columnConfig,r=e.setPhones,l=Object(c.useState)(""),i=Object(g.a)(l,2),m=i[0],f=i[1],p=Object(c.useState)(""),d=Object(g.a)(p,2),h=d[0],v=d[1],E=Object(c.useState)(""),j=Object(g.a)(E,2),O=j[0],N=j[1],P=Object(c.useState)(""),S=Object(g.a)(P,2),y=S[0],C=S[1],k=function(){f(""),v(""),N(""),document.removeEventListener("keyup",w)},x=function(){N("")},w=function(e){"Escape"===e.code&&k()},F=function(e,t){var n=a[e].validators;return(void 0===n?[]:n).map(function(n){return n(e,t)}).filter(Boolean).join(", ")},A=function(e){e.preventDefault(),F(h,O)?C(F(h,O)):(r(Object(s.a)(t.map(function(e){return e.id===m?Object(u.a)(Object(u.a)({},e),{},Object(b.a)({},h,O)):e}))),k())};return o.a.createElement(o.a.Fragment,null,Object.keys(a).map(function(e){return o.a.createElement("td",{key:e,onDoubleClick:function(){return t=n.id,a=e,r=n[e],f(t),v(a),N(r),void document.addEventListener("keyup",w);var t,a,r}},(m!==n.id||h!==e)&&n[e],m===n.id&&h===e&&o.a.createElement("form",{onSubmit:function(e){return A(e)},className:"editing-form"},o.a.createElement("input",{type:"text",className:"input is-info",value:O,autoFocus:!0,onChange:function(e){return function(e){C(""),N(e.currentTarget.value)}(e)},onBlur:function(e){return A(e)}}),o.a.createElement("button",{type:"button",className:"delete is-small",onClick:x}),y&&o.a.createElement("article",{className:"message is-danger"},o.a.createElement("div",{className:"message-body"},y))))}))},S=function(e){var t=e.phones,n=e.allPhones,a=e.columnConfig,r=e.onSelectionChanged,c=e.setPhones;return o.a.createElement("tbody",null,t.map(function(e){return o.a.createElement("tr",{key:e.id},r&&o.a.createElement("td",null,o.a.createElement("input",{type:"checkbox",checked:e.selected,onChange:function(){return r(e.id)}})),o.a.createElement(P,{allPhones:n,phone:e,columnConfig:a,setPhones:c}))}))},y=function(e){var t=e.phones,n=e.allPhones,a=e.columnConfig,r=e.isSelectedAll,c=e.sortField,l=e.sortReverse,i=e.onSelectionChanged,s=e.onSort,u=e.setPhones;return o.a.createElement("table",{className:"table is-bordered is-striped is-fullwidth"},o.a.createElement(N,{columnConfig:a,isSelectedAll:r,sortField:c,sortReverse:l,onSelectionChanged:i,onSort:s}),o.a.createElement(S,{phones:t,allPhones:n,columnConfig:a,onSelectionChanged:i,setPhones:u}))},C=function(e){var t=e.filterQuery,n=e.setFilterQuery;return o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"control"},o.a.createElement("input",{type:"text",className:"input is-info",placeholder:"Text input",value:t,onChange:function(e){return n(e.target.value)}})))},k=n(11),x=n.n(k),w=function(e){var t=e.page,n=e.activePage,a=e.text,r=void 0===a?"":a,c=e.onPageChange;return o.a.createElement("li",null,o.a.createElement("button",{type:"button",className:x()("pagination-link",{"is-current":t===n}),"aria-label":"Goto page ".concat(t),onClick:function(){return c(t)}},r||t))},F=[5,10,15,20],A=function(e){var t=e.perPage,n=e.setPerPage;return o.a.createElement("div",{className:"pagination-setting"},o.a.createElement("div",{className:"select is-info  is-small"},o.a.createElement("select",{value:t,onChange:function(e){return n(Number(e.target.value))}},F.map(function(e){return o.a.createElement("option",{key:e},e)}))))},T=(n(19),function(e){var t=e.total,n=e.perPage,a=e.page,r=e.changeActualPage,c=e.setPerPage,l=Math.ceil(t/n);return o.a.createElement("nav",{className:"pagination is-small is-full",role:"navigation","aria-label":"pagination"},o.a.createElement(A,{perPage:n,setPerPage:c}),o.a.createElement("button",{className:"pagination-previous",disabled:1===a,onClick:function(){return r(a-1)}},"Previous"),o.a.createElement("button",{className:"pagination-next",disabled:a===l,onClick:function(){return r(a+1)}},"Next page"),o.a.createElement("ul",{className:"pagination-list"},a>2&&o.a.createElement(o.a.Fragment,null,o.a.createElement(w,{page:1,activePage:a,onPageChange:function(){return r(1)}}),o.a.createElement("span",{className:"pagination__dots"},"...")),a>1&&o.a.createElement(w,{page:a-1,activePage:a,onPageChange:function(){return r(a-1)}}),o.a.createElement(w,{page:a,activePage:a,onPageChange:function(){return r(a)}}),a<l&&o.a.createElement(w,{page:a+1,activePage:a,onPageChange:function(){return r(a+1)}}),a<l-1&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"pagination__dots"},"..."),o.a.createElement(w,{page:l,activePage:a,onPageChange:function(){return r(l)}}))))}),R=(j={},Object(b.a)(j,a.Name,{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",sortType:r.String,isSearchable:!0,validators:[v,E(5)]}),Object(b.a)(j,a.Age,{title:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",sortType:r.Number,validators:[v,(O="number",function(e,t){return"number"===O?!t||Number.isInteger(+t)?"":"".concat(e," should be ").concat(O):t&&typeof t!==O?"".concat(e," should be ").concat(O):""})]}),Object(b.a)(j,a.Snippet,{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",isSearchable:!0,validators:[v,E(10)]}),j);var M=function(){var e=Object(c.useState)([]),t=Object(g.a)(e,2),n=t[0],l=t[1],i=Object(c.useState)(""),m=Object(g.a)(i,2),d=m[0],v=m[1],E=Object(c.useState)(a.Name),j=Object(g.a)(E,2),O=j[0],N=j[1],P=Object(c.useState)(R[a.Name].sortType),S=Object(g.a)(P,2),k=S[0],x=S[1],w=Object(c.useState)(!1),F=Object(g.a)(w,2),A=F[0],M=F[1],Q=Object(c.useState)(""),_=Object(g.a)(Q,2),B=_[0],D=_[1],I=Object(c.useState)(!1),J=Object(g.a)(I,2),L=J[0],q=J[1],G=Object(c.useState)(1),z=Object(g.a)(G,2),H=z[0],K=z[1],U=Object(c.useState)(5),V=Object(g.a)(U,2),W=V[0],X=V[1],Y=(H-1)*W;Object(c.useEffect)(function(){Z()},[]),Object(c.useEffect)(function(){K(1)},[W]),Object(c.useEffect)(function(){K(1)},[B]);var Z=function(){var e=Object(p.a)(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h();case 3:t=e.sent,n=t.map(function(e){var t;return t={id:e.id},Object(b.a)(t,a.Name,e.name),Object(b.a)(t,a.Age,e.age),Object(b.a)(t,a.Snippet,e.snippet),Object(b.a)(t,"selected",!1),t}),l(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),v("Oops! Something went wrong... :(");case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),$=Object(c.useCallback)(function(e,t){var n=new RegExp(B.trim(),"i");return e.filter(function(e){var t="";return Object.keys(e).forEach(function(n){R[n]&&R[n].hasOwnProperty("isSearchable")&&(t+=" ".concat(e[n]))}),t.match(n)})},[B]),ee=Object(c.useCallback)(function(e,t,n){var a=Object(s.a)(e);return t===r.String&&a.sort(function(e,t){return e[O].localeCompare(t[O])}),t===r.Number&&a.sort(function(e,t){return e[O]-t[O]}),n?a.reverse():a},[O]),te=Object(c.useMemo)(function(){return $(n,B)},[$,n,B]),ne=Object(c.useMemo)(function(){return ee(te,k,A)},[ee,te,k,A]),ae=ne.slice(Y,Y+W);return Object(c.useEffect)(function(){q(te.length>0&&te.every(function(e){return e.selected}))},[te,n,B]),o.a.createElement("section",{className:"section"},o.a.createElement("div",{className:"container"},o.a.createElement("h1",{className:"title"},"React Datatable"),d&&o.a.createElement("div",{className:"message is-danger"},o.a.createElement("div",{className:"message-header"},"Error"),o.a.createElement("div",{className:"message-body"},d)),!d&&o.a.createElement(o.a.Fragment,null,ne.length>W&&o.a.createElement("h2",{className:"subtitle"},"Phones from ".concat(Y," to ").concat(Y+W-1)),o.a.createElement(C,{filterQuery:B,setFilterQuery:D}),o.a.createElement(y,{phones:ae,allPhones:n,columnConfig:R,isSelectedAll:L,sortReverse:A,sortField:O,onSelectionChanged:function(e){l(e?n.map(function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{selected:!t.selected}):t}):n.map(function(e){return te.includes(e)?Object(u.a)(Object(u.a)({},e),{},{selected:!L}):e}))},onSort:function(e,t){t.sortType&&(M(e===O&&!A),N(e),x(t.sortType))},setPhones:l}),o.a.createElement(T,{total:ne.length,perPage:W,page:H,changeActualPage:function(e){e===H||e<1||e>Math.ceil(ne.length/W)||K(e)},setPerPage:X}))))};i.a.render(o.a.createElement(M,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.4bf7fedd.chunk.js.map