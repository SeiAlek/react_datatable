(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(20)},18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a,c,r=n(0),o=n.n(r),l=n(10),i=n.n(l),u=n(8),s=n(3),m=n(4),f=n.n(m),p=n(6),g=n(1),b=n(2),d=(n(18),function(){var e=Object(p.a)(f.a.mark(function e(t){var n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),h=function(){var e=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("".concat("https://mate-academy.github.io/phone-catalogue-static/api","/phones.json"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),v=function(e,t){return t?"":"".concat(e," is required")},E=function(e){return function(t,n){return!n||n.length>=e?"":"".concat(t," should have at least ").concat(e," characters")}},j=function(e){var t=e.columnConfig,n=e.isSelectedAll,a=e.sortReverse,c=e.onSelectionChanged,r=e.onSort;return o.a.createElement("thead",null,o.a.createElement("tr",null,c&&o.a.createElement("th",null,o.a.createElement("input",{type:"checkbox",checked:n,onChange:function(){return c(null)}})),Object.entries(t).map(function(e){var t=Object(g.a)(e,2),n=t[0],c=t[1];return o.a.createElement("th",{className:"table-headers",key:c.title,onClick:function(){return r(n,c)}},c.title,!a&&c.sortType&&o.a.createElement("span",{className:"icon"},o.a.createElement("span",{className:"fas fa-angle-down","aria-hidden":"true"})),a&&c.sortType&&o.a.createElement("span",{className:"icon"},o.a.createElement("span",{className:"fas fa-angle-up","aria-hidden":"true"})))})))},O=function(e){var t=e.allPhones,n=e.phone,a=e.columnConfig,c=e.setPhones,l=Object(r.useState)(""),i=Object(g.a)(l,2),m=i[0],f=i[1],p=Object(r.useState)(""),d=Object(g.a)(p,2),h=d[0],v=d[1],E=Object(r.useState)(""),j=Object(g.a)(E,2),O=j[0],N=j[1],P=Object(r.useState)(""),S=Object(g.a)(P,2),y=S[0],C=S[1],k=function(){f(""),v(""),N(""),document.removeEventListener("keyup",x)},w=function(){k()},x=function(e){"Escape"===e.code&&k()},A=function(e,t){var n=a[e].validators;return(void 0===n?[]:n).map(function(n){return n(e,t)}).filter(Boolean).join(", ")},T=function(e){e.preventDefault(),A(h,O)?C(A(h,O)):(c(Object(u.a)(t.map(function(e){return e.id===m?Object(s.a)(Object(s.a)({},e),{},Object(b.a)({},h,O)):e}))),f(""),v(""),N(""))};return o.a.createElement(o.a.Fragment,null,Object.keys(a).map(function(e){return o.a.createElement("td",{key:e,onDoubleClick:function(){return t=n.id,a=e,c=n[e],f(t),v(a),N(c),void document.addEventListener("keyup",x);var t,a,c}},(m!==n.id||h!==e)&&n[e],m===n.id&&h===e&&o.a.createElement("form",{onSubmit:function(e){return T(e)},className:"editing-form"},o.a.createElement("input",{type:"text",className:"input is-info",value:O,autoFocus:!0,onChange:function(e){return function(e){C(""),N(e.currentTarget.value)}(e)},onBlur:function(e){return T(e)}}),o.a.createElement("button",{className:"delete is-small",onClick:w}),y&&o.a.createElement("article",{className:"message is-danger"},o.a.createElement("div",{className:"message-body"},y))))}))},N=function(e){var t=e.phones,n=e.allPhones,a=e.columnConfig,c=e.onSelectionChanged,r=e.setPhones;return o.a.createElement("tbody",null,t.map(function(e){return o.a.createElement("tr",{key:e.id},c&&o.a.createElement("td",null,o.a.createElement("input",{type:"checkbox",checked:e.selected,onChange:function(){return c(e.id)}})),o.a.createElement(O,{allPhones:n,phone:e,columnConfig:a,setPhones:r}))}))},P=function(e){var t=e.phones,n=e.allPhones,a=e.columnConfig,c=e.isSelectedAll,r=e.sortReverse,l=e.onSelectionChanged,i=e.onSort,u=e.setPhones;return o.a.createElement("table",{className:"table is-bordered is-striped is-fullwidth"},o.a.createElement(j,{columnConfig:a,isSelectedAll:c,sortReverse:r,onSelectionChanged:l,onSort:i}),o.a.createElement(N,{phones:t,allPhones:n,columnConfig:a,onSelectionChanged:l,setPhones:u}))};!function(e){e.Name="name",e.Age="age",e.Snippet="snippet"}(a||(a={})),function(e){e.String="string",e.Number="number"}(c||(c={}));var S,y,C=function(e){var t=e.filterQuery,n=e.setFilterQuery;return o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"control"},o.a.createElement("input",{type:"text",className:"input is-info",placeholder:"Text input",value:t,onChange:function(e){return n(e.target.value)}})))},k=n(11),w=n.n(k),x=function(e){var t=e.page,n=e.activePage,a=e.text,c=void 0===a?"":a,r=e.onPageChange;return o.a.createElement("li",null,o.a.createElement("button",{type:"button",className:w()("pagination-link",{"is-current":t===n}),"aria-label":"Goto page ".concat(t),onClick:function(){return r(t)}},c||t))},A=[5,10,15,20],T=function(e){var t=e.perPage,n=e.setPerPage;return o.a.createElement("div",{className:"pagination-setting"},o.a.createElement("div",{className:"select is-info  is-small"},o.a.createElement("select",{value:t,onChange:function(e){return n(Number(e.target.value))}},A.map(function(e){return o.a.createElement("option",{key:e},e)}))))},F=(n(19),function(e){var t=e.total,n=e.perPage,a=e.page,c=e.changeActualPage,r=e.setPerPage,l=Math.ceil(t/n);return o.a.createElement("nav",{className:"pagination is-small is-full",role:"navigation","aria-label":"pagination"},o.a.createElement(T,{perPage:n,setPerPage:r}),o.a.createElement("button",{className:"pagination-previous",disabled:1===a,onClick:function(){return c(a-1)}},"Previous"),o.a.createElement("button",{className:"pagination-next",disabled:a===l,onClick:function(){return c(a+1)}},"Next page"),o.a.createElement("ul",{className:"pagination-list"},a>2&&o.a.createElement(o.a.Fragment,null,o.a.createElement(x,{page:1,activePage:a,onPageChange:function(){return c(1)}}),o.a.createElement("span",{className:"pagination__dots"},"...")),a>1&&o.a.createElement(x,{page:a-1,activePage:a,onPageChange:function(){return c(a-1)}}),o.a.createElement(x,{page:a,activePage:a,onPageChange:function(){return c(a)}}),a<l&&o.a.createElement(x,{page:a+1,activePage:a,onPageChange:function(){return c(a+1)}}),a<l-1&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"pagination__dots"},"..."),o.a.createElement(x,{page:l,activePage:a,onPageChange:function(){return c(l)}}))))}),M=(S={},Object(b.a)(S,a.Name,{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",sortType:c.String,isSearchable:!0,validators:[v,E(5)]}),Object(b.a)(S,a.Age,{title:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",sortType:c.Number,validators:[v,(y="number",function(e,t){return"number"===y?!t||Number.isInteger(+t)?"":"".concat(e," should be ").concat(y):t&&typeof t!==y?"".concat(e," should be ").concat(y):""})]}),Object(b.a)(S,a.Snippet,{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",isSearchable:!0,validators:[v,E(10)]}),S);var R=function(){var e=Object(r.useState)([]),t=Object(g.a)(e,2),n=t[0],l=t[1],i=Object(r.useState)(""),m=Object(g.a)(i,2),d=m[0],v=m[1],E=Object(r.useState)(a.Name),j=Object(g.a)(E,2),O=j[0],N=j[1],S=Object(r.useState)(M[a.Name].sortType),y=Object(g.a)(S,2),k=y[0],w=y[1],x=Object(r.useState)(!1),A=Object(g.a)(x,2),T=A[0],R=A[1],Q=Object(r.useState)(""),_=Object(g.a)(Q,2),B=_[0],D=_[1],I=Object(r.useState)(!1),J=Object(g.a)(I,2),L=J[0],q=J[1],G=Object(r.useState)(1),z=Object(g.a)(G,2),H=z[0],K=z[1],U=Object(r.useState)(5),V=Object(g.a)(U,2),W=V[0],X=V[1],Y=Object(r.useState)(1),Z=Object(g.a)(Y,2),$=(Z[0],Z[1]),ee=(H-1)*W+1;Object(r.useEffect)(function(){te()},[]),Object(r.useEffect)(function(){$(Math.ceil(n.length/W))},[n.length,W]),Object(r.useEffect)(function(){K(1)},[W]),Object(r.useEffect)(function(){K(1)},[B]);var te=function(){var e=Object(p.a)(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h();case 3:t=e.sent,n=t.map(function(e){var t;return t={id:e.id},Object(b.a)(t,a.Name,e.name),Object(b.a)(t,a.Age,e.age),Object(b.a)(t,a.Snippet,e.snippet),Object(b.a)(t,"selected",!1),t}),l(n),$(Math.ceil(n.length/W)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),v("Oops! Something went wrong... :(");case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),ne=Object(r.useCallback)(function(e,t){var n=new RegExp(B.trim(),"i");return e.filter(function(e){var t="";return Object.keys(e).forEach(function(n){M[n]&&M[n].hasOwnProperty("isSearchable")&&(t+=" ".concat(e[n]))}),t.match(n)})},[B]),ae=Object(r.useCallback)(function(e,t,n){var a=Object(u.a)(e);return t===c.String&&a.sort(function(e,t){return e[O].localeCompare(t[O])}),t===c.Number&&a.sort(function(e,t){return e[O]-t[O]}),n?a.reverse():a},[O]),ce=Object(r.useMemo)(function(){return ne(n,B)},[ne,n,B]),re=Object(r.useMemo)(function(){return ae(ce,k,T)},[ae,ce,k,T]),oe=re.slice(ee-1,ee+W-1);return Object(r.useEffect)(function(){q(ce.length>0&&ce.every(function(e){return e.selected}))},[ce,n,B]),o.a.createElement("section",{className:"section"},o.a.createElement("div",{className:"container"},o.a.createElement("h1",{className:"title"},"React Datatable"),d&&o.a.createElement("div",{className:"message is-danger"},o.a.createElement("div",{className:"message-header"},"Error"),o.a.createElement("div",{className:"message-body"},d)),!d&&o.a.createElement(o.a.Fragment,null,re.length>W&&o.a.createElement("h2",{className:"subtitle"},"Phones from ".concat(ee," to ").concat(ee+W-1)),o.a.createElement(C,{filterQuery:B,setFilterQuery:D}),o.a.createElement(P,{phones:oe,allPhones:n,columnConfig:M,isSelectedAll:L,sortReverse:T,onSelectionChanged:function(e){l(e?n.map(function(t){return t.id===e?Object(s.a)(Object(s.a)({},t),{},{selected:!t.selected}):t}):n.map(function(e){return ce.includes(e)?Object(s.a)(Object(s.a)({},e),{},{selected:!L}):e}))},onSort:function(e,t){t.sortType&&(R(e===O&&!T),N(e),w(t.sortType))},setPhones:l}),o.a.createElement(F,{total:re.length,perPage:W,page:H,changeActualPage:function(e){e===H||e<1||e>Math.ceil(re.length/W)||K(e)},setPerPage:X}))))};i.a.render(o.a.createElement(R,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.33a1575d.chunk.js.map